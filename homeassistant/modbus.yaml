- name: "nibe"
  type: tcp
  host: 192.168.0.223
  port: 502
  delay: 5
  timeout: 10
  message_wait_milliseconds: 200
  retries: 3
  retry_on_empty: true
  close_comm_on_error: false

  sensors:
    - name: "Nibe - Venkovní teplota"
      unique_id: "nibe_outdoor_temp"
      address: 40004
      slave: 1
      input_type: holding
      data_type: int16
      scale: 0.1
      precision: 1
      unit_of_measurement: "°C"
      device_class: temperature
      state_class: measurement
      scan_interval: 120

    - name: "Nibe - Stav topení"
      address: 47371
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 30

    - name: "Nibe - Stav chlazení"
      address: 47372
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 30

    - name: "Nibe - Stav TUV"
      address: 47387
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 30

    - name: "Nibe - Provozní režim"
      address: 47137
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 120

    # === STAV KOMPRESORŮ (skutečný provoz) ===
    # Cpr Status - jednoduchý on/off (0=Off, 1=On)
    - name: "Nibe - Kompresor EP14 zapnuty"
      address: 43435
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 15

    - name: "Nibe - Kompresor EP15 zapnuty"
      address: 43434
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 15

    # Compressor State - detailní (20=Stopped, 40=Starting, 60=Running, 100=Stopping)
    - name: "Nibe - Stav EP14"
      address: 43427
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 30

    - name: "Nibe - Stav EP15"
      address: 43426
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 30

    # Režim komfortu TUV (0=Economy, 1=Normal, 2=Luxury, 4=Smart Control)
    - name: "Nibe - Režim komfortu TUV"
      unique_id: "nibe_rezim_komfortu_tuv"
      address: 47041
      slave: 1
      input_type: holding
      data_type: int16
      scale: 1
      precision: 0
      scan_interval: 60

    # Priorita provozu (10=Off, 20=Hot Water, 30=Heat, 40=Pool, 50=Transfer, 60=Cooling)
    - name: "Nibe - Priorita provozu real"
      address: 43086
      slave: 1
      input_type: holding
      data_type: uint16
      scan_interval: 30

    # Degree Minutes - stupeň minut při topení (akumulovaná hodnota pro řízení topení)
    # 32bit hodnota s plnou přesností, rozsah -3000.0 až 3000.0 DM
    - name: "Nibe - Degree Minutes"
      unique_id: "nibe_degree_minutes"
      address: 40940
      slave: 1
      input_type: holding
      data_type: int32
      scale: 0.1
      precision: 1
      unit_of_measurement: "DM"
      scan_interval: 60

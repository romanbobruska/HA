# Loads default set of integrations. Do not remove.
default_config:

# Load frontend themes from the themes folder
frontend:
  themes: !include_dir_merge_named themes

automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
mqtt: !include mqtt.yaml
modbus: !include modbus.yaml
template:
  #NIBE
  - binary_sensor:
      - name: "Nibe - Kompresory aktivn칤 (bin치rn칤)"
        unique_id: nibe_kompresory_aktivni_binarni
        state: >
          {# Cpr Status registry 43434/43435: 0=Off, 1=On #}
          {% set ep14 = states('sensor.nibe_kompresor_ep14_zapnuty') | int(0) %}
          {% set ep15 = states('sensor.nibe_kompresor_ep15_zapnuty') | int(0) %}
          {{ ep14 == 1 or ep15 == 1 }}
        icon: >
          {% if is_state('binary_sensor.nibe_kompresory_aktivni_binarni', 'on') %}
            mdi:engine
          {% else %}
            mdi:engine-off
          {% endif %}

  - sensor: !include template_sensors.yaml
  - switch: !include template_switches.yaml

# OVL츼D츼N칈 FVE
# -----------------------------------------------------------------------------
# COMMAND LINE - 캛ten칤 JSON souboru s pl치nem
# -----------------------------------------------------------------------------
command_line:
  - sensor:
      name: "FVE Plan Data"
      unique_id: fve_plan_data
      command: "cat /config/fve_plan.json"
      value_template: "{{ value_json.current_mode | default('normal') }}"
      json_attributes:
        - current_mode
        - current_hour
        - plan
        - last_update
      scan_interval: 5

# -----------------------------------------------------------------------------
# INPUT BOOLEANS - P콏ep칤na캜e pro ovl치d치n칤 automatizace
# -----------------------------------------------------------------------------
input_boolean:
  fve_automatizace:
    name: "FVE Automatizace"
    icon: mdi:robot

  fve_prodej_z_baterie:
    name: "Povolit prodej z baterie"
    icon: mdi:battery-arrow-up

  fve_blokace_vybijeni:
    name: "Blokace vyb칤jen칤 baterie"
    icon: mdi:battery-lock

# -----------------------------------------------------------------------------
# INPUT NUMBERS - Nastaviteln칠 parametry
# -----------------------------------------------------------------------------

input_number: !include input_numbers.yaml

# -----------------------------------------------------------------------------
# INPUT SELECT - V칳b캩rov칠 mo쬹osti
# -----------------------------------------------------------------------------
input_select:
  fve_rezim_casu:
    name: "Re쬴m 캜asu"
    options:
      - "hodina"
      - "ctvrthodina"
    icon: mdi:clock-outline

  fve_manual_mod:
    name: "Manu치ln칤 m칩d"
    options:
      - "游뱄 Automaticky"
      - "游릭 Norm치ln칤 provoz"
      - "游리 만t콏it baterii"
      - "游댯 Nab칤jet ze s칤t캩"
      - "游댮 Prod치vat do s칤t캩"
      - "游릮 Z치kaz p콏etok콢"
    icon: mdi:cog

  fve_plan_mode:
    name: "FVE Pl치novan칳 m칩d"
    options:
      - "normal"
      - "setrit"
      - "nabijet_ze_site"
      - "prodavat"
      - "zakaz_pretoku"
    icon: mdi:calendar-clock
